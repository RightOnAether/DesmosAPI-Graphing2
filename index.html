<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Flappy Chairman</title>
<style>
body { margin: 0; overflow: hidden; font-family: 'Poppins', sans-serif; background: #f0f2f5; }
#gameCanvas { display: block; background: linear-gradient(to bottom, #87ceeb, #f0f2f5); }

#menu {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: #ffffffee;
  padding: 30px 40px;
  border-radius: 20px;
  text-align: center;
  z-index: 2;
  box-shadow: 0 10px 25px rgba(0,0,0,0.15);
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
}

#menu h1 {
  margin: 0 0 25px;
  font-size: 50px;
  color: #333;
  animation: float 2s ease-in-out infinite;
  letter-spacing: 2px;
}
@keyframes float { 0%,100% { transform: translateY(0); } 50% { transform: translateY(-15px); } }

select, button { margin-top: 5px; padding: 12px 18px; font-size: 16px; border-radius: 10px; border: 1px solid #ccc; outline: none; transition: all 0.2s ease-in-out; cursor: pointer; }
select:focus, button:focus { box-shadow: 0 0 0 3px rgba(100, 149, 237, 0.3); }
button { background: #6495ED; color: #fff; border: none; }
button:hover { background: #4176d6; }

#muteBtn, #playAgainBtn {
  position: absolute; padding: 12px 18px; font-size: 16px; border-radius: 12px; border: none; cursor: pointer;
  background: rgba(255,255,255,0.95); box-shadow: 0 4px 12px rgba(0,0,0,0.15); z-index: 3; transition: all 0.2s ease-in-out;
}
#muteBtn { bottom: 20px; left: 20px; }
#muteBtn:hover { background: #e0e0e0; }
#playAgainBtn { bottom: 80px; left: 50%; transform: translateX(-50%); display: none; background: #ff4c4c; color: white; }
#playAgainBtn:hover { background: #e04343; }

#pauseOverlay {
  position: absolute; top:0; left:0; width:100%; height:100%;
  background: rgba(0,0,0,0.5); display: none; z-index: 10; color: white; text-align: center;
  font-family: 'Poppins', sans-serif;
}
#pauseOverlay h1 {
  position: absolute; top: 40%; width: 100%; font-size: 60px; animation: float 2s ease-in-out infinite;
}
#pauseOverlay p {
  position: absolute; top: 50%; width: 100%; font-size: 24px;
}

#hitboxText { position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); font-size: 18px; color: #333; z-index: 2;
background: rgba(255,255,255,0.8); padding: 5px 12px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }

#creditBox {
  position: absolute; left: 20px; top: 50%; transform: translateY(-50%); width: 120px; aspect-ratio: 1/1;
  border-radius: 50%; display: flex; flex-direction: column; justify-content: center; align-items: center;
  font-size: 14px; text-align: center; color: #333; background: rgba(255,255,255,0.9);
  box-shadow: 0 5px 15px rgba(0,0,0,0.1); z-index: 2;
}
#charPreviewBox { margin-top: 10px; display: block; }
#charPreviewBox img { width: 100px; height: 100px; object-fit: contain; border-radius: 12px; border: 2px solid #ccc; background: white; }
</style>
</head>
<body>

<div id="menu">
  <h1>Flappy Chairman</h1>
  <label>Select Character</label>
  <select id="character">
    <option value="Mao.png">ðŸ‡¨ðŸ‡³ Chairman Mao</option>
    <option value="Jinping.png">ðŸ‡¨ðŸ‡³ Chairman Xi jinping</option>
    <option value="Kim.png">ðŸ‡°ðŸ‡µ Kim Jong Un</option>
    <option value="Trump.png">ðŸ‡ºðŸ‡¸ Trump</option>
    <option value="Roaring.png">Roaring Knight</option>
    <option value="Flappybird.png">Flappy Bird</option>
  </select>
  <div id="charPreviewBox"><img id="charPreview" src="Mao.png" alt="Character Preview"></div>
  <label>Select Difficulty</label>
  <select id="difficulty">
    <option value="baby mode">Baby Mode</option>
    <option value="hard">Hard</option>
    <option value="extreme">Extreme</option>
    <option value="impossible">Literally Impossible</option>
  </select><br>
  <button onclick="startGame()">Play</button>
</div>

<div id="hitboxText">Press F to hide Hitboxes!</div>
<div id="creditBox">Idea by Aether<br>Made by AI</div>
<button id="muteBtn">Mute</button>
<button id="playAgainBtn">Play Again</button>
<canvas id="gameCanvas"></canvas>

<div id="pauseOverlay">
  <h1>Game Paused.</h1>
  <p>Press "P" to Resume</p>
</div>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

let backgroundImg = new Image();
let characterImg = new Image();
let topPipeImg = new Image();
let bottomPipeImg = new Image();
let gameOverImg = new Image(); gameOverImg.src = "game_over.png";

const flapSound = new Audio("flap.mp3");
const hitSound = new Audio("hit.mp3");
let bgMusic;

let bird = { x:0, y:0, width:0, height:0, gravity:0, lift:0, velocity:0 };
let pipes = [];
let score = 0;
let highScore = parseInt(localStorage.getItem("highScore"))||0;
let frame=0;
let gameInterval;
let isGameOver=false;
let isMuted=false;
let showHitboxes=true;
let isPaused=false;

let pipeGap = 0.4;
let pipeSpeed = 3;
let pipeInterval = 180;

function resizeCanvas(){
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
  bird.width = canvas.width * 0.06;
  bird.height = bird.width;
  bird.x = canvas.width * 0.15;
  bird.gravity = 0.5*(canvas.height/600);
  bird.lift = -9.25*(canvas.height/600);
}
window.addEventListener('resize', resizeCanvas);
resizeCanvas();

function startGame(){
  const character = document.getElementById("character").value;
  characterImg.src = character;

  if(bgMusic){ bgMusic.pause(); bgMusic.currentTime=0; }

  if(character==="Roaring.png"){
    bgMusic = new Audio("roaring.mp3");
    backgroundImg.src="roaring_bg.png";
    topPipeImg.src="roaring_top_pipe.png";
    bottomPipeImg.src="roaring_bottom_pipe.png";
  } else{
    bgMusic = new Audio("Music.mp3");
    backgroundImg.src="Background.png";
    topPipeImg.src="tube2.png";
    bottomPipeImg.src="tube.png";
  }
  bgMusic.loop=true;

  const difficulty = document.getElementById("difficulty").value;
  if(difficulty==="baby mode"){ pipeGap=0.45; pipeSpeed=3; pipeInterval=180; }
  if(difficulty==="hard"){ pipeGap=0.35; pipeSpeed=18; pipeInterval=90; }
  if(difficulty==="extreme"){ pipeGap=0.38; pipeSpeed=25; pipeInterval=45; }
  if(difficulty==="impossible"){ pipeGap=0.38; pipeSpeed=25; pipeInterval=10; }

  document.getElementById("menu").style.display="none";
  document.getElementById("creditBox").style.display="none";
  document.getElementById("charPreviewBox").style.display="none";

  resetGame();
  if(!isMuted) bgMusic.play();
  gameInterval = setInterval(update,20);

  document.addEventListener("keydown", function(event){
    if(event.code==="Space"&&!isPaused){ flap(); }
    if(event.code==="KeyF"){ showHitboxes=!showHitboxes; }
    if(event.code==="KeyP" && !isGameOver){ togglePause(); }
  });
  canvas.addEventListener("click", ()=>{ if(!isPaused) flap(); });
}

function togglePause(){
  const overlay = document.getElementById("pauseOverlay");
  if(!isPaused){
    isPaused = true;
    overlay.style.display="block";
    clearInterval(gameInterval);
    bgMusic.pause();
  } else{
    overlay.style.display="none";
    let countdown = 3;
    const interval = setInterval(()=>{
      ctx.clearRect(0,0,canvas.width,canvas.height);
      ctx.drawImage(backgroundImg,0,0,canvas.width,canvas.height);
      drawPipes(); drawBird(); drawScore();
      ctx.fillStyle="white";
      ctx.font=`${Math.floor(canvas.width*0.1)}px sans-serif`;
      ctx.textAlign="center";
      ctx.fillText(countdown,canvas.width/2,canvas.height/2);
      countdown--;
      if(countdown<0){
        clearInterval(interval);
        isPaused=false;
        if(!isMuted) bgMusic.play();
        gameInterval=setInterval(update,20);
      }
    },1000);
  }
}

function resetGame(){ bird.y=canvas.height*0.25; bird.velocity=0; pipes=[]; score=0; frame=0; isGameOver=false; }
function flap(){ if(!isGameOver && !isPaused){ bird.velocity=bird.lift; flapSound.currentTime=0; flapSound.play(); } }

function drawBird(){ ctx.drawImage(characterImg,bird.x,bird.y,bird.width,bird.height);
  if(showHitboxes){ ctx.strokeStyle="green"; ctx.lineWidth=2; ctx.strokeRect(bird.x,bird.y,bird.width,bird.height); } }
function drawPipes(){ pipes.forEach(pipe=>{
  ctx.drawImage(topPipeImg,pipe.x,0,pipe.width,pipe.top);
  ctx.drawImage(bottomPipeImg,pipe.x,canvas.height-pipe.bottom,pipe.width,pipe.bottom);
  if(showHitboxes){ ctx.strokeStyle="blue"; ctx.lineWidth=2; ctx.strokeRect(pipe.x,0,pipe.width,pipe.top); ctx.strokeRect(pipe.x,canvas.height-pipe.bottom,pipe.width,pipe.bottom); }
}); }
function drawScore(){ ctx.fillStyle="black"; ctx.font=`${Math.floor(canvas.width*0.05)}px sans-serif`; ctx.fillText("Score:"+score,10,canvas.height*0.15); ctx.font=`${Math.floor(canvas.width*0.035)}px sans-serif`; ctx.fillText("High Score:"+highScore,10,canvas.height*0.15+40); }

function update(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.drawImage(backgroundImg,0,0,canvas.width,canvas.height);

  if(!isGameOver && !isPaused){
    bird.velocity+=bird.gravity; bird.y+=bird.velocity;

    if(bird.y+bird.height>canvas.height || bird.y<-25){ hitSound.currentTime=0; hitSound.play(); triggerGameOver(); }

    if(frame%pipeInterval===0){ 
      let topHeight = Math.random()*(canvas.height-pipeGap*canvas.height-100)+50;
      pipes.push({x:canvas.width,width:canvas.width*0.12,top:topHeight,bottom:canvas.height-topHeight-pipeGap*canvas.height,scored:false});
    }

    pipes.forEach(pipe=>{
      pipe.x-=pipeSpeed;
      if(bird.x<pipe.x+pipe.width && bird.x+bird.width>pipe.x){
        if(bird.y<pipe.top || bird.y+bird.height>canvas.height-pipe.bottom){ hitSound.currentTime=0; hitSound.play(); triggerGameOver(); }
      }
      if(!pipe.scored && bird.x>pipe.x+pipe.width){ score++; pipe.scored=true; if(score%10===0){ pipeSpeed+=0.5; } }
    });
    pipes=pipes.filter(pipe=>pipe.x+pipe.width>0);
  }

  drawPipes(); drawBird(); drawScore();

  if(isGameOver){
    ctx.fillStyle="rgba(0,0,0,0.5)";
    ctx.fillRect(0,0,canvas.width,canvas.height);
    const imgWidth=canvas.width*0.6;
    const imgHeight=imgWidth*(gameOverImg.height/gameOverImg.width||0.5);
    ctx.drawImage(gameOverImg,(canvas.width-imgWidth)/2,canvas.height*0.3-imgHeight/2,imgWidth,imgHeight);
    ctx.fillStyle="white"; ctx.font=`${Math.floor(canvas.width*0.05)}px sans-serif`;
    ctx.fillText("Final Score:"+score,canvas.width*0.25,canvas.height*0.75);
    document.getElementById("playAgainBtn").style.display="block";
  }

  frame++;
}

function triggerGameOver(){ if(isGameOver) return; isGameOver=true; clearInterval(gameInterval); bgMusic.pause(); if(score>highScore){ highScore=score; localStorage.setItem("highScore",highScore); } }

document.getElementById("character").addEventListener("change",(e)=>{ document.getElementById("charPreview").src=e.target.value; });
</script>
</body>
</html>
